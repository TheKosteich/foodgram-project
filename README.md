# Foodgram

Foodgram
 — сайт «продуктовый помощник». Это онлайн-сервис, где пользователи публикуют рецепты, подписываются на публикации других пользователей, добавляют понравившиеся рецепты в избранные, а перед походом в магазин скачивать сводный список продуктов, необходимых для приготовления одного или нескольких выбранных блюд.


## Содержание

  - [Приступая к работе](#приступая-к-работе)
  - [Запуск проекта в Docker](#запуск-проекта-в-Docker)
  - [Управление версиями](#управление-версиями)
  - [Авторы](#авторы)

## Приступая к работе

Копию прокета можно скачать с GitHub по ссылке:
`https://github.com/TheKosteich/foodgram-project`

Для запука проекта на локальном компьютере необходимо внести необходимые настройки в файл foodgram/settings.py. 

После настройки проекта необходимо установить пакеты необходимые для работы проекта:
  
`pip install -r requirements.txt`
  
Создать таблицы в базе данных:

`python manage.py migrate`

Создать суперюзера:

`python manage.py createsuperuser`

Для заполнения базы данных начальными данными в проект добавлены фикстуры и написаны команды для их загрузки. 

Для загрузки ингридиентов выполните:

`python manage.py load_ingredients`

Для загрузки тегов рецептов выполните:

`python manage.py load_tags`

## Запуск проекта в Docker

Первый запуск проекта отличается от последующих запусков и описан в разделе [Первый запуск](#первый-запуск).
Для запуска настроенного пректа в Doker достаточно выполнить команду:
 
 ```docker-compose up``` 

### Первый запуск

Если вы запускаете проект впервые вам нужно создать файл с переменными окружения, схему базыданных, собрать статические файлы в одну директорию и создать администратора приложения, загрузить в базу начальные данные(ингредиенты и теги).

Ваши переменные окружения необходимо записать в файл .env
 расположить его в одной директории с файлом docker-compose.yaml
 . Список переменных окружиния для запуска проекта:

```
# секретный ключ Django
SECRET_KEY=<секретный_ключ>
# используемый бекэнд дла базы данных
DB_ENGINE=django.db.backends.postgresql
# имя базы данных
POSTGRES_DB=foodgram
# пользователь для базы данных 
POSTGRES_USER=postgres
# пароль пользователя для базы данных
POSTGRES_PASSWORD=<password>
# хост базы данных
DB_HOST=db
# порт подключения базы даннх
DB_PORT=5432
# доступные хосты для обработки запросов к приложению
ALLOWED_HOSTS=127.0.0.1,localhost
# базовый URL статических файлов
STATIC_URL=/static/
# директория для сбора статических файлов 
STATIC_ROOT=/code/static/
# настройки e-mail бекэнда
EMAIL_BACKEND=django.core.mail.backends.filebased.EmailBackend
EMAIL_FILE_PATH=/tmp
``` 

Выполнив команду ```docker-compose up``` вы операционной запустите три контейнера. Командой  ```docker containers ls``` можно вывести информацию о запущенных контейнерах. Нам нужен ID контейнера с именем ```foodgram_web```. 

С помощью команды ```sudo docker exec -it <container_ID> bash
``` подключаемся к терминалу контейнера ```foodgram_web```.

Создаем таблицы в базе данных:

`python manage.py migrate`

Создаем суперюзера:

`python manage.py createsuperuser`

Для заполнения базы данных начальными данными в проект добавлены фикстуры и написаны команды для их загрузки. 

Для загрузки ингридиентов выполните:

`python manage.py load_ingredients`

Для загрузки тегов рецептов выполните:

`python manage.py load_tags`

Если в базе не хватает какой либо информации, то для добавления можно воспользоваться встроенной Django-админкой.

Демо проекта можно посмотреть по адресу - http://95.217.220.211/

## Управление версиями

Для управления версиями мы используем GitHub.

## Авторы

  - **Константин Торновский** - [TheKosteich](https://github.com/TheKosteich)